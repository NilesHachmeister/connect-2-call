(this["webpackJsonpconnect-2-call"]=this["webpackJsonpconnect-2-call"]||[]).push([[0],{77:function(e,a,t){},84:function(e,a,t){"use strict";t.r(a);var n,r,l,i=t(0),c=t.n(i),o=t(24),s=t.n(o),u=(t(77),t(4)),d=t(68),g=t(99),p=t(101),j=t(96),b=t(65),h=t(69),m=t(28),O=t(35),x=t(14),y=t(10),C=t(98),k=t(97),T=t(94),v=t(102),$=t(41),L=t(100),w=(Object(L.a)(n||(n=Object($.a)(["\n  mutation login($email: String!, $password: String!) {\n    login(email: $email, password: $password) {\n      token\n      user {\n        _id\n        username\n      }\n    }\n  }\n"]))),Object(L.a)(r||(r=Object($.a)(["\n  mutation addPost($taskTitle: String!, $callLanguage: String!, $description: String!, $callCategory: String, $payment: String!, $callTime: String!, $phoneNumberToCall: String!, $postUser: String!) {\n    addPost(taskTitle: $taskTitle, callLanguage: $callLanguage, description: $description, callCategory: $callCategory, payment: $payment, callTime: $callTime, phoneNumberToCall: $phoneNumberToCall, postUser: $postUser ) {\n      \n        _id\n        taskTitle\n        callLanguage\n        description\n        callCategory\n        payment\n        callTime\n        phoneNumberToCall\n    postUser\n      \n    }\n  }\n"])))),S=(Object(L.a)(l||(l=Object($.a)(["\nmutation AddUser($name: String!, $email: String!, $password: String!, $siteLanguage: String!, $spokenLanguage: String!, $isCaller: Boolean!) {\n  addUser(name: $name, email: $email, password: $password, siteLanguage: $siteLanguage, spokenLanguage: $spokenLanguage, isCaller: $isCaller) {\n       user {\n        _id\n        name\n        email\n        password\n        siteLanguage\n        spokenLanguage\n        isCaller\n        category\n      }\n      token\n  }\n}"]))),t(58)),f=t(59),q=t(46),F=t.n(q),N=new(function(){function e(){Object(S.a)(this,e)}return Object(f.a)(e,[{key:"getProfile",value:function(){return F()(this.getToken())}},{key:"loggedIn",value:function(){var e=this.getToken();return!!e&&!this.isTokenExpired(e)}},{key:"isTokenExpired",value:function(e){try{return F()(e).exp<Date.now()/1e3}catch(a){return!1}}},{key:"getToken",value:function(){return localStorage.getItem("id_token")}},{key:"login",value:function(e){localStorage.setItem("id_token",e),window.location.assign("/")}},{key:"logout",value:function(){localStorage.removeItem("id_token"),window.location.assign("/")}}]),e}()),_=t(2),G=function(){var e=Object(i.useState)({taskTitle:"",callLanguage:"",description:"",callCategory:"",payment:"",callTime:"",phoneNumberToCall:""}),a=Object(y.a)(e,2),t=a[0],n=a[1],r=Object(v.a)(w),l=Object(y.a)(r,2),c=l[0],o=l[1].error,s=Object(i.useState)(!0),d=Object(y.a)(s,1)[0],g=Object(i.useState)(!1),p=Object(y.a)(g,2),j=p[0],b=p[1],h=function(e){var a=e.target,r=a.name,l=a.value;n(Object(u.a)(Object(u.a)({},t),{},Object(x.a)({},r,l)))},$=function(){var e=Object(O.a)(Object(m.a)().mark((function e(a){var r,l,i;return Object(m.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),!1===a.currentTarget.checkValidity()&&(a.preventDefault(),a.stopPropagation()),r=N.getProfile(),e.prev=4,e.next=7,c({variables:Object(u.a)(Object(u.a)({},t),{},{postUser:r.data._id})});case 7:if(l=e.sent,i=l.data,console.log(i),!o){e.next=12;break}throw new Error("something went wrong!");case 12:e.next=18;break;case 14:e.prev=14,e.t0=e.catch(4),console.error(e.t0),b(!0);case 18:n({taskTitle:"",callLanguage:"",description:"",callCategory:"",payment:"",callTime:"",phoneNumberToCall:""});case 19:case"end":return e.stop()}}),e,null,[[4,14]])})));return function(a){return e.apply(this,arguments)}}();return Object(_.jsx)(_.Fragment,{children:Object(_.jsxs)(C.a,{noValidate:!0,validated:d,onSubmit:$,children:[Object(_.jsx)(k.a,{dismissible:!0,onClose:function(){return b(!1)},show:j,variant:"danger",children:"Something went wrong with your signup!"}),Object(_.jsxs)(C.a.Group,{children:[Object(_.jsx)(C.a.Label,{htmlFor:"taskTitle",children:"taskTitle"}),Object(_.jsx)(C.a.Control,{type:"text",placeholder:"taskTitle",name:"taskTitle",onChange:h,value:t.taskTitle,required:!0}),Object(_.jsx)(C.a.Control.Feedback,{type:"invalid",children:"taskTitle is required!"})]}),Object(_.jsxs)(C.a.Group,{children:[Object(_.jsx)(C.a.Label,{htmlFor:"callLanguage",children:" callLanguage"}),Object(_.jsx)(C.a.Control,{type:"text",placeholder:"callLanguage",name:"callLanguage",onChange:h,value:t.callLanguage,required:!0}),Object(_.jsx)(C.a.Control.Feedback,{type:"invalid",children:" callLanguage is required!"})]}),Object(_.jsxs)(C.a.Group,{children:[Object(_.jsx)(C.a.Label,{htmlFor:"description",children:"description"}),Object(_.jsx)(C.a.Control,{type:"text",placeholder:"description",name:"description",onChange:h,value:t.description,required:!0}),Object(_.jsx)(C.a.Control.Feedback,{type:"invalid",children:"description is required!"})]}),Object(_.jsxs)(C.a.Group,{children:[Object(_.jsx)(C.a.Label,{htmlFor:"callCategory",children:"callCategory"}),Object(_.jsx)(C.a.Control,{type:"text",placeholder:"callCategory",name:"callCategory",onChange:h,value:t.callCategory,required:!0}),Object(_.jsx)(C.a.Control.Feedback,{type:"invalid",children:"callCategory is required!"})]}),Object(_.jsxs)(C.a.Group,{children:[Object(_.jsx)(C.a.Label,{htmlFor:"payment",children:"payment"}),Object(_.jsx)(C.a.Control,{type:"text",placeholder:"payment",name:"payment",onChange:h,value:t.payment,required:!0}),Object(_.jsx)(C.a.Control.Feedback,{type:"invalid",children:"payment is required!"})]}),Object(_.jsxs)(C.a.Group,{children:[Object(_.jsx)(C.a.Label,{htmlFor:"callTime",children:"callTime"}),Object(_.jsx)(C.a.Control,{type:"text",placeholder:"callTime",name:"callTime",onChange:h,value:t.callTime,required:!0}),Object(_.jsx)(C.a.Control.Feedback,{type:"invalid",children:"callTime is required!"})]}),Object(_.jsxs)(C.a.Group,{children:[Object(_.jsx)(C.a.Label,{htmlFor:"phoneNumberToCall",children:"phoneNumberToCall"}),Object(_.jsx)(C.a.Control,{type:"text",placeholder:"phoneNumberToCall",name:"phoneNumberToCall",onChange:h,value:t.phoneNumberToCall,required:!0}),Object(_.jsx)(C.a.Control.Feedback,{type:"invalid",children:"phoneNumberToCall is required!"})]}),Object(_.jsx)(T.a,{disabled:!(t.taskTitle&&t.callLanguage&&t.description),type:"submit",variant:"success",children:"Submit"})]})})},U=Object(d.a)({uri:"/graphql"}),I=Object(b.a)((function(e,a){var t=a.headers,n=localStorage.getItem("id_token");return{headers:Object(u.a)(Object(u.a)({},t),{},{authorization:n?"Bearer ".concat(n):""})}})),P=new g.a({link:I.concat(U),cache:new p.a});var E=function(){return Object(_.jsx)(j.a,{client:P,children:Object(_.jsx)(h.a,{children:Object(_.jsx)(G,{})})})};s.a.render(Object(_.jsx)(c.a.StrictMode,{children:Object(_.jsx)(E,{})}),document.getElementById("root"))}},[[84,1,2]]]);
//# sourceMappingURL=main.cbbe3338.chunk.js.map